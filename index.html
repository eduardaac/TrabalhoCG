<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Meu Jogo</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="html/resources/main.css">
  </head>
  <body>

    <!-- Menu e Cabeçalho -->
    <div id="panel">
      <div id="header">
        <script>
          function openGame() {
            iframe.src = "../index.html";  // Substitua pelo caminho para o seu jogo
            document.body.appendChild(iframe);
          }
          
          function openInstructions() {
            iframe.src = "path/to/instructions.html";  // Substitua pelo caminho para o manual ou instruções
            document.body.appendChild(iframe);
          }
        </script>

        <h1><a onclick='openGame()'>Carregar Meu Jogo</a></h1>
        <div id="sections"></div>
        <div id="expandButton"></div>
      </div>

      <!-- Outros elementos como input de busca -->
      <div id="panelScrim"></div>

      <div id="contentWrapper">
        <div id="inputWrapper">
          <input placeholder="Buscar..." type="text" id="filterInput" autocorrect="off" autocapitalize="off" spellcheck="false" />
          <div id="exitSearchButton"></div>
        </div>
        <div id="content"></div>
      </div>
    </div>

    <!-- Iframe onde o jogo será carregado -->
    <iframe name="viewer"></iframe>

    <!-- Scripts de navegação e interação -->
    <script src="html/resources/list.js"></script>
    <script>
      var panel = document.getElementById('panel');
      var content = document.getElementById('content');
      var iframe = document.querySelector('iframe');

      var pageProperties = {};
      var titles = {};
      var categoryElements = [];

      var navigation;

      // Função para criar o link para as páginas do jogo
      function createLink(pageName, pageURL) {
        var link = document.createElement('a');
        link.href = pageURL + '.html';
        link.textContent = pageName;
        link.setAttribute('target', 'viewer');
        link.addEventListener('click', function(event) {
          if (event.button !== 0 || event.ctrlKey || event.altKey || event.metaKey) return;
          window.location.hash = pageURL;
          panel.classList.remove('open');
          content.querySelectorAll('a').forEach(function(item) {
            item.classList.remove('selected');
          });
          link.classList.add('selected');
        });
        return link;
      }

      // Carregar jogo e instruções no iframe
      function createNavigation() {
        navigation = document.createElement('div');
        content.appendChild(navigation);

        var selectedPage = window.location.hash.substring(1);

        var gameLink = createLink('Jogo', 'path/to/your/game');
        var instructionLink = createLink('Instruções', 'path/to/instructions');

        navigation.appendChild(gameLink);
        navigation.appendChild(instructionLink);

        if (selectedPage === 'path/to/your/game') {
          gameLink.classList.add('selected');
        } else if (selectedPage === 'path/to/instructions') {
          instructionLink.classList.add('selected');
        }
      }

      // Atualiza a URL fragmentada com base na navegação
      window.onpopstate = createNewIframe;

      createNavigation();
      createNewIframe();

      function createNewIframe() {
        var hash = window.location.hash.substring(1);
        if (hash) {
          iframe.src = hash + '.html';
        } else {
          iframe.src = ''; // Página inicial ou jogo padrão
        }
      }
    </script>

    <!-- Carregar jogo automaticamente ao iniciar -->
    <script>
      openGame(); // Carrega o jogo automaticamente ao abrir a página
    </script>

  </body>
</html>
